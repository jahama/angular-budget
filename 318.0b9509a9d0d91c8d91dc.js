"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[318],{2318:(et,m,a)=>{a.r(m),a.d(m,{HomeModule:()=>tt});var i=a(8583),t=a(476);let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez]]}),e})();var j=a(9668),f=a(3891),p=a(9922),u=a(5207),g=a(2340),h=a(1841);let T=(()=>{class e{constructor(o){this.http=o}postProject$(o){return this.http.post(g.N.apiHost+"projects",o).pipe((0,u.U)(s=>s.data))}getProjects$(){return this.http.get(g.N.apiHost+"projects").pipe((0,u.U)(o=>o.data))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(h.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_=(()=>{class e{constructor(o){this.http=o}getTasksByProjectId$(o){return this.http.get(`${g.N.apiHost}projects/${o}/tasks`).pipe((0,u.U)(s=>s.data))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(h.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=a(721);let y=(()=>{class e extends v.y{constructor(){super({loading:!1,error:!1,projects:[],tasks:[]})}setLoadingState(o){const s=this.getState();s.loading=o,s.error=!1,o&&(s.projects=[],s.tasks=[]),this.setState(s)}setErrorState(o){const s=this.getState();s.error=o,this.setState(s)}addProjects(o){const s=this.getState(),c=o.map(r=>Object.assign(Object.assign({},r),{pendingTasks:0,completedTasks:0}));s.projects=s.projects.concat(c),this.setState(s)}addTasks(o){const s=this.getState();s.tasks=s.tasks.concat(o),this.setState(s)}updateProjectTasks(o,s){const c=this.getState(),r=c.projects.find(l=>l.id===o);r&&(r.pendingTasks=s.filter(l=>!1===l.done).length,r.completedTasks=s.filter(l=>!0===l.done).length),this.setState(c)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),A=(()=>{class e{constructor(o,s,c){this.projects=o,this.tasks=s,this.store=c,this.projectViews$=this.store.select$(r=>r.projects),this.tasks$=this.store.select$(r=>r.tasks),this.loading$=this.store.select$(r=>r.loading),this.error$=this.store.select$(r=>r.error)}addNewProject(){this.projects.postProject$({id:"",name:"",startDate:new Date,budget:0,status:"planned"}).subscribe()}loadProjectViews(){this.store.setLoadingState(!0),this.projects.getProjects$().pipe((0,p.b)(o=>this.store.addProjects(o)),(0,p.b)(()=>this.store.setLoadingState(!1)),(0,p.b)(o=>o.forEach(s=>this.loadTasksByProjectId(s.id)))).subscribe({error:o=>{this.store.setLoadingState(!1),this.store.setErrorState(!0)}})}loadTasksByProjectId(o){this.tasks.getTasksByProjectId$(o).pipe((0,p.b)(s=>this.store.addTasks(s)),(0,p.b)(s=>this.store.updateProjectTasks(o,s))).subscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(T),t.LFG(_),t.LFG(y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=a(9409),C=a(3817);let S=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Oqu(s.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",s.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(s.tag.value),t.xp6(1),t.hij(" ",s.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),x=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:6,vars:0,consts:[[1,"message","is-warning","is-large"],[1,"message-header"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4ab} No data yet"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Go ahead and create your first data set. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();var d=a(6355);let b=(()=>{class e{transform(o,...s){return(0,d.em)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"projectStatus",type:e,pure:!0}),e})(),k=(()=>{class e{transform(o,...s){return(0,d.g3)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),w=(()=>{class e{transform(o,...s){return(0,d.S4)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const U=function(e){return{caption:"Ends",value:e}};function N(e,n){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",12),t.ALo(2,"date"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,U,t.lcZ(2,1,o.endDate)))}}const q=function(){return{caption:"Edit",link:"#"}},L=function(){return{caption:"Delete",link:"#"}},$=function(e,n){return[e,n]},D=function(e,n){return{title:e,actions:n}},H=function(e){return{caption:"Starts",value:e}},F=function(e){return{caption:"Budget",value:e}},I=function(e,n){return{caption:"Status",value:e,statusClass:n}},Y=function(e,n){return{caption:"Pending Tasks",value:e,statusClass:n}},B=function(e,n){return{caption:"Completed Tasks",value:e,statusClass:n}};function J(e,n){if(1&e&&(t.TgZ(0,"ab-card",10),t.TgZ(1,"main"),t.TgZ(2,"p",11),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",12),t.ALo(6,"date"),t.YNc(7,N,3,5,"ng-container",13),t._UZ(8,"ab-tag",12),t.ALo(9,"number"),t._UZ(10,"ab-tag",12),t.ALo(11,"projectStatus"),t._UZ(12,"ab-tag",12),t.ALo(13,"pending"),t._UZ(14,"ab-tag",12),t.ALo(15,"completed"),t.qZA(),t.qZA(),t.qZA()),2&e){const o=n.$implicit;t.Q6J("card",t.WLB(23,D,o.name,t.WLB(20,$,t.DdM(18,q),t.DdM(19,L)))),t.xp6(3),t.Oqu(o.description),t.xp6(2),t.Q6J("tag",t.VKq(26,H,t.lcZ(6,8,o.startDate))),t.xp6(2),t.Q6J("ngIf",o.endDate),t.xp6(1),t.Q6J("tag",t.VKq(28,F,t.lcZ(9,10,o.budget))),t.xp6(2),t.Q6J("tag",t.WLB(30,I,o.status,t.lcZ(11,12,o.status))),t.xp6(2),t.Q6J("tag",t.WLB(33,Y,o.pendingTasks,t.lcZ(13,14,o.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(36,B,o.completedTasks,t.lcZ(15,16,o.completedTasks)))}}function O(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"section"),t.TgZ(1,"header",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"p",5),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().addNewProject.next()}),t._uU(8,"Add new"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"main",8),t.YNc(10,J,16,39,"ab-card",9),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(5),t.hij("List of ",o.projects.length," projects"),t.xp6(5),t.Q6J("ngForOf",o.projects)}}function M(e,n){1&e&&t._UZ(0,"ab-no-data-yet")}let E=(()=>{class e{constructor(){this.projects=null,this.addNewProject=new t.vpe}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},outputs:{addNewProject:"addNewProject"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],[1,"level"],[1,"level-left"],[1,"level-item"],[1,"title"],[1,"level-right"],[1,"button","level-item",3,"click"],[1,"columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(o,s){if(1&o&&(t.YNc(0,O,11,2,"section",0),t.YNc(1,M,1,0,"ng-template",null,1,t.W1O)),2&o){const c=t.MAs(2);t.Q6J("ngIf",s.projects&&s.projects.length>0)("ngIfElse",c)}},directives:[i.O5,i.sg,C.A,S,x],pipes:[i.uU,i.JJ,b,k,w],styles:[""],changeDetection:0}),e})(),Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-error"]],decls:6,vars:0,consts:[[1,"message","is-danger","is-large"],[1,"message-header"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4a5} Something went wrong"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Sorry, we could not complete the operation. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})(),W=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-loading"]],decls:7,vars:0,consts:[[1,"message","is-info","is-large"],[1,"message-header"],[1,"button","is-loading","is-info"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Loading..."),t.qZA(),t._UZ(4,"span",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait while we retrieve the data ... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function z(e,n){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"ab-projects",5),t.NdJ("addNewProject",function(){return t.CHM(o),t.oxw(2).onAddNewProject()}),t.ALo(2,"async"),t.qZA(),t.BQk()}if(2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("projects",t.lcZ(2,1,o.projects$))}}function V(e,n){if(1&e&&(t.ynx(0),t.YNc(1,z,3,3,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,o.error$))("ngIfElse",s)}}function G(e,n){1&e&&t._UZ(0,"ab-error")}function X(e,n){1&e&&t._UZ(0,"ab-loading")}const K=[{path:"",component:(()=>{class e{constructor(o){this.service=o,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$,this.loading$=this.service.loading$,this.error$=this.service.error$}ngOnInit(){this.service.loadProjectViews()}onAddNewProject(){this.service.addNewProject()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(A))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:20,vars:4,consts:[["pageTitle","Budget dashboard"],[4,"ngIf","ngIfElse"],["error",""],["loading",""],[1,"is-italic"],[3,"projects","addNewProject"]],template:function(o,s){if(1&o&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,V,3,4,"ng-container",1),t.ALo(3,"async"),t.YNc(4,G,1,0,"ng-template",null,2,t.W1O),t.YNc(6,X,1,0,"ng-template",null,3,t.W1O),t._UZ(8,"hr"),t.TgZ(9,"pre"),t._uU(10,"      "),t.TgZ(11,"p",4),t._uU(12,"To do..."),t.qZA(),t._uU(13,"\n      "),t.TgZ(14,"li"),t._uU(15,"Tasks summary (total/pending)"),t.qZA(),t._uU(16,"\n      "),t.TgZ(17,"li"),t._uU(18,"Transactions summary (spending/earnings)"),t.qZA(),t._uU(19,"\n    "),t.qZA(),t.qZA(),t.qZA()),2&o){const c=t.MAs(7);t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,2,s.loading$))("ngIfElse",c)}},directives:[P.I,i.O5,E,Q,W],pipes:[i.Ov],styles:[""],changeDetection:0}),e})()}];let R=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(K)],f.Bz]}),e})(),tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,R,j.W,Z]]}),e})()}}]);