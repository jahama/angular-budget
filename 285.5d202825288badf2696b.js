"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[285],{285:(st,d,a)=>{a.r(d),a.d(d,{HomeModule:()=>et});var r=a(583),t=a(476);let v=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.ez]]}),e})();var j=a(668),g=a(783),p=a(922),l=a(207),m=a(340),f=a(841);let Z=(()=>{class e{constructor(s){this.http=s}getProjects$(){return this.http.get(m.N.apiHost+"projects").pipe((0,l.U)(s=>s.data))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(s){this.http=s}getTasksByProjectId$(s){return this.http.get(`${m.N.apiHost}projects/${s}/tasks`).pipe((0,l.U)(o=>o.data))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=a(94),y=a(738),C=a(297),b=a(76);function U(e,n){return e===n}function P(e){return JSON.parse(JSON.stringify(e))}let k=(()=>{class e extends class{constructor(n,s=P){this.cloner=s,this._state$=new S.X(this.cloner(n))}getState$(){return this._state$.asObservable().pipe((0,l.U)(n=>this.cloner(n)))}select$(n){return this.getState$().pipe((0,l.U)(n),function(e,n){return void 0===n&&(n=y.y),e=null!=e?e:U,(0,C.e)(function(s,o){var i,c=!0;s.subscribe(new b.Q(o,function(u){var h=n(u);(c||!e(i,h))&&(c=!1,i=h,o.next(u))}))})}())}getState(){return this.cloner(this._state$.value)}setState(n){this._state$.next(this.cloner(n))}}{constructor(){super({projects:[],tasks:[]})}addProjects(s){const o=this.getState(),i=s.map(c=>Object.assign(Object.assign({},c),{pendingTasks:0,completedTasks:0}));o.projects=o.projects.concat(i),this.setState(o)}addTasks(s){const o=this.getState();o.tasks=o.tasks.concat(s),this.setState(o)}updateProjectTasks(s,o){const i=this.getState(),c=i.projects.find(u=>u.id===s);c&&(c.pendingTasks=o.filter(u=>!1===u.done).length,c.completedTasks=o.filter(u=>!0===u.done).length),this.setState(i)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),H=(()=>{class e{constructor(s,o,i){this.projects=s,this.tasks=o,this.store=i,this.projectViews$=this.store.select$(c=>c.projects)}loadProjectViews(){this.projects.getProjects$().pipe((0,p.b)(s=>this.store.addProjects(s)),(0,p.b)(s=>s.forEach(o=>this.loadTasksByProjectId(o.id)))).subscribe()}loadTasksByProjectId(s){this.tasks.getTasksByProjectId$(s).pipe((0,p.b)(o=>this.store.addTasks(o)),(0,p.b)(o=>this.store.updateProjectTasks(s,o))).subscribe()}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(Z),t.LFG(T),t.LFG(k))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $=a(409);function O(e,n){if(1&e&&(t.TgZ(0,"a",6),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("href",s.link,t.LSH),t.xp6(1),t.Oqu(s.caption)}}const q=[[["main"]]],J=["main"];let L=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-card"]],inputs:{card:"card"},ngContentSelectors:J,decls:8,vars:2,consts:[[1,"card","m-4"],[1,"card-header"],[1,"card-header-title","is-size-4"],[1,"card-content"],[1,"card-footer"],["class","card-footer-item",3,"href",4,"ngFor","ngForOf"],[1,"card-footer-item",3,"href"]],template:function(s,o){1&s&&(t.F$t(q),t.TgZ(0,"article",0),t.TgZ(1,"header",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"main",3),t.Hsn(5),t.qZA(),t.TgZ(6,"footer",4),t.YNc(7,O,2,2,"a",5),t.qZA(),t.qZA()),2&s&&(t.xp6(3),t.Oqu(o.card.title),t.xp6(4),t.Q6J("ngForOf",o.card.actions))},directives:[r.sg],styles:[""],changeDetection:0}),e})(),x=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&s&&(t.xp6(2),t.Oqu(o.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",o.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(o.tag.value),t.xp6(1),t.hij(" ",o.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),B=(()=>{class e{transform(s,...o){return function(e){var n;return(null===(n=[{name:"is-warning",value:"plan"},{name:"is-success",value:"active"},{name:"is-danger",value:"delayed"},{name:"is-dark",value:"canceled"}].find(o=>e===o.value))||void 0===n?void 0:n.name)||"is-info"}(s)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275pipe=t.Yjl({name:"status",type:e,pure:!0}),e})();const Q=function(e){return{caption:"Ends",value:e}};function D(e,n){if(1&e&&(t._UZ(0,"ab-tag",5),t.ALo(1,"date")),2&e){const s=t.oxw().$implicit;t.Q6J("tag",t.VKq(3,Q,t.lcZ(1,1,s.endDate)||""))}}const M=function(){return{caption:"Edit",link:"#"}},_=function(){return{caption:"Delete",link:"#"}},z=function(e,n){return[e,n]},N=function(e,n){return{title:e,actions:n}},V=function(e){return{caption:"Starts",value:e}},Y=function(e){return{caption:"Budget",value:e}},w=function(e,n){return{caption:"Status",value:e,statusClass:n}},K=function(e){return{caption:"Pending Tasks",value:e,statusClass:"is-danger"}},G=function(e){return{caption:"Completed Tasks",value:e,statusClass:"is-success"}};function X(e,n){if(1&e&&(t.TgZ(0,"ab-card",3),t.TgZ(1,"main"),t.TgZ(2,"p",4),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",5),t.ALo(6,"date"),t.YNc(7,D,2,5,"ab-tag",6),t._UZ(8,"ab-tag",5),t.ALo(9,"number"),t._UZ(10,"ab-tag",5),t.ALo(11,"status"),t._UZ(12,"ab-tag",5),t.ALo(13,"number"),t._UZ(14,"ab-tag",5),t.ALo(15,"number"),t.qZA(),t.qZA(),t.qZA()),2&e){const s=n.$implicit;t.Q6J("card",t.WLB(23,N,s.name,t.WLB(20,z,t.DdM(18,M),t.DdM(19,_)))),t.xp6(3),t.Oqu(s.description),t.xp6(2),t.Q6J("tag",t.VKq(26,V,t.lcZ(6,8,s.startDate)||"")),t.xp6(2),t.Q6J("ngIf",s.endDate),t.xp6(1),t.Q6J("tag",t.VKq(28,Y,t.lcZ(9,10,s.budget)||"")),t.xp6(2),t.Q6J("tag",t.WLB(30,w,s.status,t.lcZ(11,12,s.status))),t.xp6(2),t.Q6J("tag",t.VKq(33,K,t.lcZ(13,14,s.pendingTasks)||"")),t.xp6(2),t.Q6J("tag",t.VKq(35,G,t.lcZ(15,16,s.completedTasks)||""))}}let W=(()=>{class e{constructor(){this.projects=[]}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},decls:4,vars:1,consts:[[1,"is-size-3"],[1,"section","columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[3,"tag",4,"ngIf"]],template:function(s,o){1&s&&(t.TgZ(0,"h2",0),t._uU(1,"List of projects"),t.qZA(),t.TgZ(2,"section",1),t.YNc(3,X,16,37,"ab-card",2),t.qZA()),2&s&&(t.xp6(3),t.Q6J("ngForOf",o.projects))},directives:[r.sg,L,x,r.O5],pipes:[r.uU,r.JJ,B],styles:[""],changeDetection:0}),e})();function E(e,n){1&e&&t._UZ(0,"ab-projects",3),2&e&&t.Q6J("projects",n.ngIf)}const R=[{path:"",component:(()=>{class e{constructor(s){this.service=s,this.projects$=this.service.projectViews$}ngOnInit(){this.service.loadProjectViews()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(H))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:15,vars:3,consts:[["pageTitle","Projects home"],[1,"is-italic"],[3,"projects",4,"ngIf"],[3,"projects"]],template:function(s,o){1&s&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.TgZ(2,"pre"),t._uU(3,"      "),t.TgZ(4,"li",1),t._uU(5,"List of projects"),t.qZA(),t._uU(6,"\n      "),t.TgZ(7,"li"),t._uU(8,"Tasks summary (total/pending)"),t.qZA(),t._uU(9,"\n      "),t.TgZ(10,"li"),t._uU(11,"Transactions summary (spending/earnings)"),t.qZA(),t._uU(12,"\n    "),t.qZA(),t.YNc(13,E,1,1,"ab-projects",2),t.ALo(14,"async"),t.qZA(),t.qZA()),2&s&&(t.xp6(13),t.Q6J("ngIf",t.lcZ(14,1,o.projects$)))},directives:[$.I,r.O5,W],pipes:[r.Ov],styles:[""],changeDetection:0}),e})()}];let tt=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(R)],g.Bz]}),e})(),et=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.ez,tt,j.W,v]]}),e})()}}]);