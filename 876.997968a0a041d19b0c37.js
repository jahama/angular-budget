"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[876],{876:(pt,d,a)=>{a.r(d),a.d(d,{HomeModule:()=>it});var c=a(583),t=a(476);let v=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez]]}),e})();var Z=a(668),g=a(783),u=a(922),l=a(207),m=a(340),f=a(841);let j=(()=>{class e{constructor(n){this.http=n}getProjects$(){return this.http.get(m.N.apiHost+"projects").pipe((0,l.U)(n=>n.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(n){this.http=n}getTasksByProjectId$(n){return this.http.get(`${m.N.apiHost}projects/${n}/tasks`).pipe((0,l.U)(o=>o.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=a(94),C=a(738),S=a(297),A=a(76);function _(e,s){return e===s}function b(e){return JSON.parse(JSON.stringify(e))}let U=(()=>{class e extends class{constructor(s,n=b){this.cloner=n,this._state$=new y.X(this.cloner(s))}getState$(){return this._state$.asObservable().pipe((0,l.U)(s=>this.cloner(s)))}select$(s){return this.getState$().pipe((0,l.U)(s),function(e,s){return void 0===s&&(s=C.y),e=null!=e?e:_,(0,S.e)(function(n,o){var r,i=!0;n.subscribe(new A.Q(o,function(p){var h=s(p);(i||!e(r,h))&&(i=!1,r=h,o.next(p))}))})}())}getState(){return this.cloner(this._state$.value)}setState(s){this._state$.next(this.cloner(s))}}{constructor(){super({projects:[],tasks:[]}),this.projectViews$=this.select$(o=>o.projects),this.tasks$=this.select$(o=>o.tasks)}addProjects(n){const o=this.getState(),r=n.map(i=>Object.assign(Object.assign({},i),{pendingTasks:0,completedTasks:0}));o.projects=o.projects.concat(r),this.setState(o)}addTasks(n){const o=this.getState();o.tasks=o.tasks.concat(n),this.setState(o)}updateProjectTasks(n,o){const r=this.getState(),i=r.projects.find(p=>p.id===n);i&&(i.pendingTasks=o.filter(p=>!1===p.done).length,i.completedTasks=o.filter(p=>!0===p.done).length),this.setState(r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),F=(()=>{class e{constructor(n,o,r){this.projects=n,this.tasks=o,this.store=r,this.projectViews$=this.store.projectViews$,this.tasks$=this.store.tasks$}loadProjectViews(){this.projects.getProjects$().pipe((0,u.b)(n=>this.store.addProjects(n)),(0,u.b)(n=>n.forEach(o=>this.loadTasksByProjectId(o.id)))).subscribe()}loadTasksByProjectId(n){this.tasks.getTasksByProjectId$(n).pipe((0,u.b)(o=>this.store.addTasks(o)),(0,u.b)(o=>this.store.updateProjectTasks(n,o))).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(j),t.LFG(T),t.LFG(U))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $=a(409);function x(e,s){if(1&e&&(t.TgZ(0,"a",6),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.Q6J("href",n.link,t.LSH),t.xp6(1),t.Oqu(n.caption)}}const H=[[["main"]]],O=["main"];let q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-card"]],inputs:{card:"card"},ngContentSelectors:O,decls:8,vars:2,consts:[[1,"card","m-4"],[1,"card-header"],[1,"card-header-title","is-size-4"],[1,"card-content"],[1,"card-footer"],["class","card-footer-item",3,"href",4,"ngFor","ngForOf"],[1,"card-footer-item",3,"href"]],template:function(n,o){1&n&&(t.F$t(H),t.TgZ(0,"article",0),t.TgZ(1,"header",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"main",3),t.Hsn(5),t.qZA(),t.TgZ(6,"footer",4),t.YNc(7,x,2,2,"a",5),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(o.card.title),t.xp6(4),t.Q6J("ngForOf",o.card.actions))},directives:[c.sg],styles:[""],changeDetection:0}),e})(),I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(o.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",o.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(o.tag.value),t.xp6(1),t.hij(" ",o.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),L=(()=>{class e{transform(n,...o){return function(e){var s;return(null===(s=[{name:"is-warning",value:"plan"},{name:"is-success",value:"active"},{name:"is-danger",value:"delayed"},{name:"is-dark",value:"canceled"}].find(o=>e===o.value))||void 0===s?void 0:s.name)||"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"status",type:e,pure:!0}),e})(),Y=(()=>{class e{transform(n,...o){return function(e){return e>0?"is-danger":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),w=(()=>{class e{transform(n,...o){return function(e){return e>0?"is-success":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const N=function(e){return{caption:"Ends",value:e}};function Q(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",5),t.ALo(2,"date"),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,N,t.lcZ(2,1,n.endDate)))}}const M=function(){return{caption:"Edit",link:"#"}},z=function(){return{caption:"Delete",link:"#"}},V=function(e,s){return[e,s]},W=function(e,s){return{title:e,actions:s}},G=function(e){return{caption:"Starts",value:e}},X=function(e){return{caption:"Budget",value:e}},E=function(e,s){return{caption:"Status",value:e,statusClass:s}},K=function(e,s){return{caption:"Pending Tasks",value:e,statusClass:s}},R=function(e,s){return{caption:"Completed Tasks",value:e,statusClass:s}};function tt(e,s){if(1&e&&(t.TgZ(0,"ab-card",3),t.TgZ(1,"main"),t.TgZ(2,"p",4),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",5),t.ALo(6,"date"),t.YNc(7,Q,3,5,"ng-container",6),t._UZ(8,"ab-tag",5),t.ALo(9,"number"),t._UZ(10,"ab-tag",5),t.ALo(11,"status"),t._UZ(12,"ab-tag",5),t.ALo(13,"pending"),t._UZ(14,"ab-tag",5),t.ALo(15,"completed"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=s.$implicit;t.Q6J("card",t.WLB(23,W,n.name,t.WLB(20,V,t.DdM(18,M),t.DdM(19,z)))),t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Q6J("tag",t.VKq(26,G,t.lcZ(6,8,n.startDate))),t.xp6(2),t.Q6J("ngIf",n.endDate),t.xp6(1),t.Q6J("tag",t.VKq(28,X,t.lcZ(9,10,n.budget))),t.xp6(2),t.Q6J("tag",t.WLB(30,E,n.status,t.lcZ(11,12,n.status))),t.xp6(2),t.Q6J("tag",t.WLB(33,K,n.pendingTasks,t.lcZ(13,14,n.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(36,R,n.completedTasks,t.lcZ(15,16,n.completedTasks)))}}let et=(()=>{class e{constructor(){this.projects=[]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},decls:4,vars:1,consts:[[1,"is-size-3"],[1,"section","columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"List of projects"),t.qZA(),t.TgZ(2,"section",1),t.YNc(3,tt,16,39,"ab-card",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngForOf",o.projects))},directives:[c.sg,q,I,c.O5],pipes:[c.uU,c.JJ,L,Y,w],styles:[""],changeDetection:0}),e})(),nt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:7,vars:0,consts:[[1,"section","message","is-primary"],[1,"message-header"],["aria-label","delete",1,"delete"],[1,"message-body"]],template:function(n,o){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"No data yet"),t.qZA(),t._UZ(4,"button",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait while we load your data... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function st(e,s){if(1&e&&t._UZ(0,"ab-projects",5),2&e){const n=t.oxw().ngIf;t.Q6J("projects",n)}}function ot(e,s){1&e&&t._UZ(0,"ab-no-data-yet")}function at(e,s){if(1&e&&(t.ynx(0),t.YNc(1,st,1,1,"ab-projects",3),t.YNc(2,ot,1,0,"ng-template",null,4,t.W1O),t.BQk()),2&e){const n=s.ngIf,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",o)}}const ct=[{path:"",component:(()=>{class e{constructor(n){this.service=n,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$}ngOnInit(){this.service.loadProjectViews()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:15,vars:3,consts:[["pageTitle","Budget dashboard"],[4,"ngIf"],[1,"is-italic"],[3,"projects",4,"ngIf","ngIfElse"],["noDataYet",""],[3,"projects"]],template:function(n,o){1&n&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,at,4,2,"ng-container",1),t.ALo(3,"async"),t.TgZ(4,"pre"),t._uU(5,"      "),t.TgZ(6,"p",2),t._uU(7,"To do..."),t.qZA(),t._uU(8,"\n      "),t.TgZ(9,"li"),t._uU(10,"Tasks summary (total/pending)"),t.qZA(),t._uU(11,"\n      "),t.TgZ(12,"li"),t._uU(13,"Transactions summary (spending/earnings)"),t.qZA(),t._uU(14,"\n    "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.projects$)))},directives:[$.I,c.O5,et,nt],pipes:[c.Ov],styles:[""],changeDetection:0}),e})()}];let rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ct)],g.Bz]}),e})(),it=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,rt,Z.W,v]]}),e})()}}]);