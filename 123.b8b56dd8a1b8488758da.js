"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[123],{123:(dt,d,a)=>{a.r(d),a.d(d,{HomeModule:()=>ut});var i=a(583),t=a(476);let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez]]}),e})();var v=a(668),g=a(783),p=a(922),u=a(207),m=a(340),f=a(841);let T=(()=>{class e{constructor(n){this.http=n}getProjects$(){return this.http.get(m.N.apiHost+"projects").pipe((0,u.U)(n=>n.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j=(()=>{class e{constructor(n){this.http=n}getTasksByProjectId$(n){return this.http.get(`${m.N.apiHost}projects/${n}/tasks`).pipe((0,u.U)(o=>o.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=a(94),C=a(738),_=a(297),S=a(76);function b(e,s){return e===s}function P(e){return JSON.parse(JSON.stringify(e))}let U=(()=>{class e extends class{constructor(s,n=P){this.cloner=n,this._state$=new y.X(this.cloner(s))}getState$(){return this._state$.asObservable().pipe((0,u.U)(s=>this.cloner(s)))}select$(s){return this.getState$().pipe((0,u.U)(s),function(e,s){return void 0===s&&(s=C.y),e=null!=e?e:b,(0,_.e)(function(n,o){var c,r=!0;n.subscribe(new S.Q(o,function(l){var h=s(l);(r||!e(c,h))&&(r=!1,c=h,o.next(l))}))})}())}getState(){return this.cloner(this._state$.value)}setState(s){this._state$.next(this.cloner(s))}}{constructor(){super({loading:!1,projects:[],tasks:[]}),this.projectViews$=this.select$(o=>o.projects),this.tasks$=this.select$(o=>o.tasks),this.loading$=this.select$(o=>o.loading)}setLoadingState(n){const o=this.getState();o.loading=n,this.setState(o)}addProjects(n){const o=this.getState(),c=n.map(r=>Object.assign(Object.assign({},r),{pendingTasks:0,completedTasks:0}));o.projects=o.projects.concat(c),this.setState(o)}addTasks(n){const o=this.getState();o.tasks=o.tasks.concat(n),this.setState(o)}updateProjectTasks(n,o){const c=this.getState(),r=c.projects.find(l=>l.id===n);r&&(r.pendingTasks=o.filter(l=>!1===l.done).length,r.completedTasks=o.filter(l=>!0===l.done).length),this.setState(c)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k=(()=>{class e{constructor(n,o,c){this.projects=n,this.tasks=o,this.store=c,this.projectViews$=this.store.projectViews$,this.tasks$=this.store.tasks$,this.loading$=this.store.loading$}loadProjectViews(){this.store.setLoadingState(!0),this.projects.getProjects$().pipe((0,p.b)(n=>this.store.addProjects(n)),(0,p.b)(()=>this.store.setLoadingState(!1)),(0,p.b)(n=>n.forEach(o=>this.loadTasksByProjectId(o.id)))).subscribe()}loadTasksByProjectId(n){this.tasks.getTasksByProjectId$(n).pipe((0,p.b)(o=>this.store.addTasks(o)),(0,p.b)(o=>this.store.updateProjectTasks(n,o))).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(T),t.LFG(j),t.LFG(U))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=a(409);function F(e,s){if(1&e&&(t.TgZ(0,"a",6),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.Q6J("href",n.link,t.LSH),t.xp6(1),t.Oqu(n.caption)}}const L=[[["main"]]],q=["main"];let I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-card"]],inputs:{card:"card"},ngContentSelectors:q,decls:8,vars:2,consts:[[1,"card","m-4"],[1,"card-header"],[1,"card-header-title","is-size-4"],[1,"card-content"],[1,"card-footer"],["class","card-footer-item",3,"href",4,"ngFor","ngForOf"],[1,"card-footer-item",3,"href"]],template:function(n,o){1&n&&(t.F$t(L),t.TgZ(0,"article",0),t.TgZ(1,"header",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"main",3),t.Hsn(5),t.qZA(),t.TgZ(6,"footer",4),t.YNc(7,F,2,2,"a",5),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(o.card.title),t.xp6(4),t.Q6J("ngForOf",o.card.actions))},directives:[i.sg],styles:[""],changeDetection:0}),e})(),H=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(o.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",o.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(o.tag.value),t.xp6(1),t.hij(" ",o.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),O=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:7,vars:0,consts:[[1,"section","message","is-warning","is-large"],[1,"message-header"],["aria-label","delete",1,"delete"],[1,"message-body"]],template:function(n,o){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4ab} No data yet"),t.qZA(),t._UZ(4,"button",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Go ahead and create your first data set. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})(),Y=(()=>{class e{transform(n,...o){return function(e){var s;return(null===(s=[{name:"is-warning",value:"plan"},{name:"is-success",value:"active"},{name:"is-danger",value:"delayed"},{name:"is-dark",value:"canceled"}].find(o=>e===o.value))||void 0===s?void 0:s.name)||"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"status",type:e,pure:!0}),e})(),w=(()=>{class e{transform(n,...o){return function(e){return e>0?"is-danger":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),N=(()=>{class e{transform(n,...o){return function(e){return e>0?"is-success":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const Q=function(e){return{caption:"Ends",value:e}};function M(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",7),t.ALo(2,"date"),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,Q,t.lcZ(2,1,n.endDate)))}}const z=function(){return{caption:"Edit",link:"#"}},V=function(){return{caption:"Delete",link:"#"}},W=function(e,s){return[e,s]},E=function(e,s){return{title:e,actions:s}},G=function(e){return{caption:"Starts",value:e}},X=function(e){return{caption:"Budget",value:e}},K=function(e,s){return{caption:"Status",value:e,statusClass:s}},R=function(e,s){return{caption:"Pending Tasks",value:e,statusClass:s}},tt=function(e,s){return{caption:"Completed Tasks",value:e,statusClass:s}};function et(e,s){if(1&e&&(t.TgZ(0,"ab-card",5),t.TgZ(1,"main"),t.TgZ(2,"p",6),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",7),t.ALo(6,"date"),t.YNc(7,M,3,5,"ng-container",8),t._UZ(8,"ab-tag",7),t.ALo(9,"number"),t._UZ(10,"ab-tag",7),t.ALo(11,"status"),t._UZ(12,"ab-tag",7),t.ALo(13,"pending"),t._UZ(14,"ab-tag",7),t.ALo(15,"completed"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=s.$implicit;t.Q6J("card",t.WLB(23,E,n.name,t.WLB(20,W,t.DdM(18,z),t.DdM(19,V)))),t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Q6J("tag",t.VKq(26,G,t.lcZ(6,8,n.startDate))),t.xp6(2),t.Q6J("ngIf",n.endDate),t.xp6(1),t.Q6J("tag",t.VKq(28,X,t.lcZ(9,10,n.budget))),t.xp6(2),t.Q6J("tag",t.WLB(30,K,n.status,t.lcZ(11,12,n.status))),t.xp6(2),t.Q6J("tag",t.WLB(33,R,n.pendingTasks,t.lcZ(13,14,n.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(36,tt,n.completedTasks,t.lcZ(15,16,n.completedTasks)))}}function nt(e,s){if(1&e&&(t.TgZ(0,"section",3),t.YNc(1,et,16,39,"ab-card",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.projects)}}function st(e,s){1&e&&t._UZ(0,"ab-no-data-yet")}let ot=(()=>{class e{constructor(){this.projects=[]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},decls:5,vars:2,consts:[[1,"is-size-3"],["class","section columns is-multiline",4,"ngIf","ngIfElse"],["noDataYet",""],[1,"section","columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(n,o){if(1&n&&(t.TgZ(0,"h2",0),t._uU(1,"List of projects"),t.qZA(),t.YNc(2,nt,2,1,"section",1),t.YNc(3,st,1,0,"ng-template",null,2,t.W1O)),2&n){const c=t.MAs(4);t.xp6(2),t.Q6J("ngIf",o.projects.length>0)("ngIfElse",c)}},directives:[i.O5,i.sg,I,H,O],pipes:[i.uU,i.JJ,Y,w,N],styles:[""],changeDetection:0}),e})(),at=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-loading"]],decls:7,vars:0,consts:[[1,"section","message","is-info","is-large"],[1,"message-header"],["aria-label","delete",1,"delete"],[1,"message-body"]],template:function(n,o){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u23f3 Loading data"),t.qZA(),t._UZ(4,"button",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function ct(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"ab-projects",5),t.BQk()),2&e){const n=s.ngIf;t.xp6(1),t.Q6J("projects",n)}}function it(e,s){if(1&e&&(t.ynx(0),t.YNc(1,ct,2,1,"ng-container",4),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.projects$))}}function rt(e,s){1&e&&t._UZ(0,"ab-loading")}const lt=[{path:"",component:(()=>{class e{constructor(n){this.service=n,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$,this.loading$=this.service.loading$}ngOnInit(){this.service.loadProjectViews()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:17,vars:4,consts:[["pageTitle","Budget dashboard"],[4,"ngIf","ngIfElse"],["loading",""],[1,"is-italic"],[4,"ngIf"],[3,"projects"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,it,3,3,"ng-container",1),t.ALo(3,"async"),t.YNc(4,rt,1,0,"ng-template",null,2,t.W1O),t.TgZ(6,"pre"),t._uU(7,"      "),t.TgZ(8,"p",3),t._uU(9,"To do..."),t.qZA(),t._uU(10,"\n      "),t.TgZ(11,"li"),t._uU(12,"Tasks summary (total/pending)"),t.qZA(),t._uU(13,"\n      "),t.TgZ(14,"li"),t._uU(15,"Transactions summary (spending/earnings)"),t.qZA(),t._uU(16,"\n    "),t.qZA(),t.qZA(),t.qZA()),2&n){const c=t.MAs(5);t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,2,o.loading$))("ngIfElse",c)}},directives:[x.I,i.O5,ot,at],pipes:[i.Ov],styles:[""],changeDetection:0}),e})()}];let pt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(lt)],g.Bz]}),e})(),ut=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,pt,v.W,Z]]}),e})()}}]);