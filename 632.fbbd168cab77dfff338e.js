"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[632],{6632:(_,m,a)=>{a.r(m),a.d(m,{HomeModule:()=>nt});var r=a(554),f=a(9668),i=a(8583),d=a(7717),t=a(476),p=a(9922),g=a(2991),h=a(5207),T=a(2340),j=a(1841);let v=(()=>{class e{constructor(o){this.http=o}getTasksByProjectId$(o){return this.http.get(`${T.N.apiHost}projects/${o}/tasks`).pipe((0,h.U)(s=>s.data))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(j.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=a(721);let y=(()=>{class e extends C.y{constructor(){super({loading:!1,error:!1,projects:[],tasks:[]})}setLoadingState(o){const s=this.getState();s.loading=o,s.error=!1,o&&(s.projects=[],s.tasks=[]),this.setState(s)}setErrorState(o){const s=this.getState();s.error=o,this.setState(s)}addProjects(o){const s=this.getState(),l=o.map(u=>Object.assign(Object.assign({},u),{pendingTasks:0,completedTasks:0}));s.projects=s.projects.concat(l),this.setState(s)}addTasks(o){const s=this.getState();s.tasks=s.tasks.concat(o),this.setState(s)}updateProjectTasks(o,s){const l=this.getState(),u=l.projects.find(c=>c.id===o);u&&(u.pendingTasks=s.filter(c=>!1===c.done).length,u.completedTasks=s.filter(c=>!0===c.done).length),this.setState(l)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=a(7496);let P=(()=>{class e{constructor(o,s,l,u){this.projects=o,this.tasks=s,this.store=l,this.confirm=u,this.projectViews$=this.store.select$(c=>c.projects),this.tasks$=this.store.select$(c=>c.tasks),this.loading$=this.store.select$(c=>c.loading),this.error$=this.store.select$(c=>c.error)}addNewProject(){this.projects.postProject$({id:"",name:"",startDate:new Date,budget:0,status:"planned"}).subscribe()}loadProjectViews(){this.store.setLoadingState(!0),this.projects.getProjects$().pipe((0,p.b)(o=>this.store.addProjects(o)),(0,p.b)(()=>this.store.setLoadingState(!1)),(0,p.b)(o=>o.forEach(s=>this.loadTasksByProjectId(s.id)))).subscribe({error:o=>{this.store.setLoadingState(!1),this.store.setErrorState(!0)}})}loadTasksByProjectId(o){this.tasks.getTasksByProjectId$(o).pipe((0,p.b)(s=>this.store.addTasks(s)),(0,p.b)(s=>this.store.updateProjectTasks(o,s))).subscribe()}deleteProject(o){this.confirm.showModal({title:"Delete Project",message:"Are you sure you want to delete this project?"}),this.confirm.status$.subscribe(s=>{"confirmed"===s&&this.projects.deleteProject$(o).pipe((0,p.b)(()=>this.loadProjectViews())).subscribe()})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(g.m),t.LFG(v),t.LFG(y),t.LFG(A.Y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var S=a(9409),x=a(3817);let b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Oqu(s.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",s.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(s.tag.value),t.xp6(1),t.hij(" ",s.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),D=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:6,vars:0,consts:[[1,"message","is-warning","is-large"],[1,"message-header"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4ab} No data yet"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Go ahead and create your first data set. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();var Z=a(6355);let L=(()=>{class e{transform(o,...s){return(0,Z.em)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"projectStatus",type:e,pure:!0}),e})(),k=(()=>{class e{transform(o,...s){return(0,Z.g3)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),U=(()=>{class e{transform(o,...s){return(0,Z.S4)(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const $=function(e){return{caption:"Ends",value:e}};function I(e,n){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",12),t.ALo(2,"date"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,$,t.lcZ(2,1,o.endDate)))}}const E=function(e){return{caption:"Edit",link:e}},O=function(){return{caption:"Delete",command:"delete"}},F=function(e,n){return[e,n]},H=function(e,n){return{title:e,actions:n}},M=function(e){return{caption:"Starts",value:e}},q=function(e){return{caption:"Budget",value:e}},w=function(e,n){return{caption:"Status",value:e,statusClass:n}},B=function(e,n){return{caption:"Pending Tasks",value:e,statusClass:n}},J=function(e,n){return{caption:"Completed Tasks",value:e,statusClass:n}};function Y(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"ab-card",10),t.NdJ("actionClick",function(){const u=t.CHM(o).$implicit;return t.oxw(2).delete.next(u.id)}),t.TgZ(1,"main"),t.TgZ(2,"p",11),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",12),t.ALo(6,"date"),t.YNc(7,I,3,5,"ng-container",13),t._UZ(8,"ab-tag",12),t.ALo(9,"number"),t._UZ(10,"ab-tag",12),t.ALo(11,"uppercase"),t.ALo(12,"projectStatus"),t._UZ(13,"ab-tag",12),t.ALo(14,"pending"),t._UZ(15,"ab-tag",12),t.ALo(16,"completed"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=n.$implicit;t.Q6J("card",t.WLB(26,H,o.name,t.WLB(23,F,t.VKq(20,E,"/projects/edit/"+o.id),t.DdM(22,O)))),t.xp6(3),t.Oqu(o.description),t.xp6(2),t.Q6J("tag",t.VKq(29,M,t.lcZ(6,8,o.startDate))),t.xp6(2),t.Q6J("ngIf",o.endDate),t.xp6(1),t.Q6J("tag",t.VKq(31,q,t.lcZ(9,10,o.budget))),t.xp6(2),t.Q6J("tag",t.WLB(33,w,t.lcZ(11,12,o.status),t.lcZ(12,14,o.status))),t.xp6(3),t.Q6J("tag",t.WLB(36,B,o.pendingTasks,t.lcZ(14,16,o.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(39,J,o.completedTasks,t.lcZ(16,18,o.completedTasks)))}}const N=function(){return["projects/add"]};function Q(e,n){if(1&e&&(t.TgZ(0,"section"),t.TgZ(1,"header",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"p",5),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"a",7),t._uU(8,"Add new"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"main",8),t.YNc(10,Y,17,42,"ab-card",9),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(5),t.hij("List of ",o.projects.length," projects"),t.xp6(2),t.Q6J("routerLink",t.DdM(3,N)),t.xp6(3),t.Q6J("ngForOf",o.projects)}}function W(e,n){1&e&&t._UZ(0,"ab-no-data-yet")}let V=(()=>{class e{constructor(){this.projects=null,this.delete=new t.vpe}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},outputs:{delete:"delete"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],[1,"level"],[1,"level-left"],[1,"level-item"],[1,"title"],[1,"level-right"],[1,"button","level-item",3,"routerLink"],[1,"columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card","actionClick",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card","actionClick"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(o,s){if(1&o&&(t.YNc(0,Q,11,4,"section",0),t.YNc(1,W,1,0,"ng-template",null,1,t.W1O)),2&o){const l=t.MAs(2);t.Q6J("ngIf",s.projects&&s.projects.length>0)("ngIfElse",l)}},directives:[i.O5,d.yS,i.sg,x.A,b,D],pipes:[i.uU,i.JJ,i.gd,L,k,U],styles:[""],changeDetection:0}),e})(),z=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-error"]],decls:6,vars:0,consts:[[1,"message","is-danger","is-large"],[1,"message-header"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4a5} Something went wrong"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Sorry, we could not complete the operation. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})(),K=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-loading"]],decls:7,vars:0,consts:[[1,"message","is-info","is-large"],[1,"message-header"],[1,"button","is-loading","is-info"],[1,"message-body"]],template:function(o,s){1&o&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Loading..."),t.qZA(),t._UZ(4,"span",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait while we retrieve the data ... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function G(e,n){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"ab-projects",4),t.NdJ("delete",function(l){return t.CHM(o),t.oxw(2).onDelete(l)}),t.ALo(2,"async"),t.qZA(),t.BQk()}if(2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("projects",t.lcZ(2,1,o.projects$))}}function R(e,n){if(1&e&&(t.ynx(0),t.YNc(1,G,3,3,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,o.error$))("ngIfElse",s)}}function X(e,n){1&e&&t._UZ(0,"ab-error")}function tt(e,n){1&e&&t._UZ(0,"ab-loading")}const et=[{path:"",component:(()=>{class e{constructor(o){this.service=o,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$,this.loading$=this.service.loading$,this.error$=this.service.error$}ngOnInit(){this.service.loadProjectViews()}onDelete(o){this.service.deleteProject(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:8,vars:4,consts:[["pageTitle","Project Budget dashboard"],[4,"ngIf","ngIfElse"],["error",""],["loading",""],[3,"projects","delete"]],template:function(o,s){if(1&o&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,R,3,4,"ng-container",1),t.ALo(3,"async"),t.YNc(4,X,1,0,"ng-template",null,2,t.W1O),t.YNc(6,tt,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.qZA()),2&o){const l=t.MAs(7);t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,2,s.loading$))("ngIfElse",l)}},directives:[S.I,i.O5,V,z,K],pipes:[i.Ov],styles:[""],changeDetection:0}),e})()}];let ot=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(et)],d.Bz]}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,ot,f.W,r.O]]}),e})()},9409:(_,m,a)=>{a.d(m,{I:()=>d});var r=a(476);const f=[[["main"]]],i=["main"];let d=(()=>{class t{constructor(){this.pageTitle=""}}return t.\u0275fac=function(g){return new(g||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ab-page"]],inputs:{pageTitle:"pageTitle"},ngContentSelectors:i,decls:6,vars:1,consts:[[1,"hero","is-primary"],[1,"hero-body"],[1,"title"],[1,"section"]],template:function(g,h){1&g&&(r.F$t(f),r.TgZ(0,"header",0),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r._uU(3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(4,"main",3),r.Hsn(5),r.qZA()),2&g&&(r.xp6(3),r.Oqu(h.pageTitle))},styles:[""],changeDetection:0}),t})()},9668:(_,m,a)=>{a.d(m,{W:()=>d});var r=a(8583),f=a(7717),i=a(476);let d=(()=>{class t{}return t.\u0275fac=function(g){return new(g||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[r.ez,f.Bz]]}),t})()}}]);