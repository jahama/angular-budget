"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[632],{6632:(T,d,a)=>{a.r(d),a.d(d,{HomeModule:()=>nt});var r=a(554),m=a(9668),c=a(8583),g=a(7717),t=a(476),l=a(9922),u=a(2991),h=a(5207),v=a(2340),j=a(1841);let _=(()=>{class e{constructor(n){this.http=n}getTasksByProjectId$(n){return this.http.get(`${v.N.apiHost}projects/${n}/tasks`).pipe((0,h.U)(s=>s.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(j.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=a(721);let A=(()=>{class e extends y.y{constructor(){super({loading:!1,error:!1,projects:[],tasks:[]})}setLoadingState(n){const s=this.getState();s.loading=n,s.error=!1,n&&(s.projects=[],s.tasks=[]),this.setState(s)}setErrorState(n){const s=this.getState();s.error=n,this.setState(s)}addProjects(n){const s=this.getState(),p=n.map(i=>Object.assign(Object.assign({},i),{pendingTasks:0,completedTasks:0}));s.projects=s.projects.concat(p),this.setState(s)}addTasks(n){const s=this.getState();s.tasks=s.tasks.concat(n),this.setState(s)}updateProjectTasks(n,s){const p=this.getState(),i=p.projects.find(f=>f.id===n);i&&(i.pendingTasks=s.filter(f=>!1===f.done).length,i.completedTasks=s.filter(f=>!0===f.done).length),this.setState(p)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),C=(()=>{class e{constructor(n,s,p){this.projects=n,this.tasks=s,this.store=p,this.projectViews$=this.store.select$(i=>i.projects),this.tasks$=this.store.select$(i=>i.tasks),this.loading$=this.store.select$(i=>i.loading),this.error$=this.store.select$(i=>i.error)}addNewProject(){this.projects.postProject$({id:"",name:"",startDate:new Date,budget:0,status:"planned"}).subscribe()}loadProjectViews(){this.store.setLoadingState(!0),this.projects.getProjects$().pipe((0,l.b)(n=>this.store.addProjects(n)),(0,l.b)(()=>this.store.setLoadingState(!1)),(0,l.b)(n=>n.forEach(s=>this.loadTasksByProjectId(s.id)))).subscribe({error:n=>{this.store.setLoadingState(!1),this.store.setErrorState(!0)}})}loadTasksByProjectId(n){this.tasks.getTasksByProjectId$(n).pipe((0,l.b)(s=>this.store.addTasks(s)),(0,l.b)(s=>this.store.updateProjectTasks(n,s))).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(u.m),t.LFG(_),t.LFG(A))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=a(9409),S=a(3817);let x=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(s.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",s.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(s.tag.value),t.xp6(1),t.hij(" ",s.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:6,vars:0,consts:[[1,"message","is-warning","is-large"],[1,"message-header"],[1,"message-body"]],template:function(n,s){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4ab} No data yet"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Go ahead and create your first data set. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();var Z=a(6355);let L=(()=>{class e{transform(n,...s){return(0,Z.em)(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"projectStatus",type:e,pure:!0}),e})(),D=(()=>{class e{transform(n,...s){return(0,Z.g3)(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),U=(()=>{class e{transform(n,...s){return(0,Z.S4)(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const k=function(e){return{caption:"Ends",value:e}};function I(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",12),t.ALo(2,"date"),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,k,t.lcZ(2,1,n.endDate)))}}const O=function(e){return{caption:"Edit",link:e}},$=function(){return{caption:"Delete",link:"#"}},E=function(e,o){return[e,o]},q=function(e,o){return{title:e,actions:o}},B=function(e){return{caption:"Starts",value:e}},F=function(e){return{caption:"Budget",value:e}},H=function(e,o){return{caption:"Status",value:e,statusClass:o}},M=function(e,o){return{caption:"Pending Tasks",value:e,statusClass:o}},w=function(e,o){return{caption:"Completed Tasks",value:e,statusClass:o}};function Y(e,o){if(1&e&&(t.TgZ(0,"ab-card",10),t.TgZ(1,"main"),t.TgZ(2,"p",11),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",12),t.ALo(6,"date"),t.YNc(7,I,3,5,"ng-container",13),t._UZ(8,"ab-tag",12),t.ALo(9,"number"),t._UZ(10,"ab-tag",12),t.ALo(11,"uppercase"),t.ALo(12,"projectStatus"),t._UZ(13,"ab-tag",12),t.ALo(14,"pending"),t._UZ(15,"ab-tag",12),t.ALo(16,"completed"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit;t.Q6J("card",t.WLB(26,q,n.name,t.WLB(23,E,t.VKq(20,O,"/projects/edit/"+n.id),t.DdM(22,$)))),t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Q6J("tag",t.VKq(29,B,t.lcZ(6,8,n.startDate))),t.xp6(2),t.Q6J("ngIf",n.endDate),t.xp6(1),t.Q6J("tag",t.VKq(31,F,t.lcZ(9,10,n.budget))),t.xp6(2),t.Q6J("tag",t.WLB(33,H,t.lcZ(11,12,n.status),t.lcZ(12,14,n.status))),t.xp6(3),t.Q6J("tag",t.WLB(36,M,n.pendingTasks,t.lcZ(14,16,n.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(39,w,n.completedTasks,t.lcZ(16,18,n.completedTasks)))}}const J=function(){return["projects/add"]};function Q(e,o){if(1&e&&(t.TgZ(0,"section"),t.TgZ(1,"header",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"p",5),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"a",7),t._uU(8,"Add new"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"main",8),t.YNc(10,Y,17,42,"ab-card",9),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(5),t.hij("List of ",n.projects.length," projects"),t.xp6(2),t.Q6J("routerLink",t.DdM(3,J)),t.xp6(3),t.Q6J("ngForOf",n.projects)}}function N(e,o){1&e&&t._UZ(0,"ab-no-data-yet")}let W=(()=>{class e{constructor(){this.projects=null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],[1,"level"],[1,"level-left"],[1,"level-item"],[1,"title"],[1,"level-right"],[1,"button","level-item",3,"routerLink"],[1,"columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(n,s){if(1&n&&(t.YNc(0,Q,11,4,"section",0),t.YNc(1,N,1,0,"ng-template",null,1,t.W1O)),2&n){const p=t.MAs(2);t.Q6J("ngIf",s.projects&&s.projects.length>0)("ngIfElse",p)}},directives:[c.O5,g.yS,c.sg,S.A,x,b],pipes:[c.uU,c.JJ,c.gd,L,D,U],styles:[""],changeDetection:0}),e})(),V=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-error"]],decls:6,vars:0,consts:[[1,"message","is-danger","is-large"],[1,"message-header"],[1,"message-body"]],template:function(n,s){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4a5} Something went wrong"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._uU(5," Sorry, we could not complete the operation. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})(),z=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-loading"]],decls:7,vars:0,consts:[[1,"message","is-info","is-large"],[1,"message-header"],[1,"button","is-loading","is-info"],[1,"message-body"]],template:function(n,s){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Loading..."),t.qZA(),t._UZ(4,"span",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait while we retrieve the data ... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function K(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"ab-projects",4),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("projects",t.lcZ(2,1,n.projects$))}}function R(e,o){if(1&e&&(t.ynx(0),t.YNc(1,K,3,3,"ng-container",1),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(),s=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,n.error$))("ngIfElse",s)}}function X(e,o){1&e&&t._UZ(0,"ab-error")}function G(e,o){1&e&&t._UZ(0,"ab-loading")}const tt=[{path:"",component:(()=>{class e{constructor(n){this.service=n,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$,this.loading$=this.service.loading$,this.error$=this.service.error$}ngOnInit(){this.service.loadProjectViews()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:8,vars:4,consts:[["pageTitle","Project Budget dashboard"],[4,"ngIf","ngIfElse"],["error",""],["loading",""],[3,"projects"]],template:function(n,s){if(1&n&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,R,3,4,"ng-container",1),t.ALo(3,"async"),t.YNc(4,X,1,0,"ng-template",null,2,t.W1O),t.YNc(6,G,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.qZA()),2&n){const p=t.MAs(7);t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,2,s.loading$))("ngIfElse",p)}},directives:[P.I,c.O5,W,V,z],pipes:[c.Ov],styles:[""],changeDetection:0}),e})()}];let et=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(tt)],g.Bz]}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,et,m.W,r.O]]}),e})()},9409:(T,d,a)=>{a.d(d,{I:()=>g});var r=a(476);const m=[[["main"]]],c=["main"];let g=(()=>{class t{constructor(){this.pageTitle=""}}return t.\u0275fac=function(u){return new(u||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ab-page"]],inputs:{pageTitle:"pageTitle"},ngContentSelectors:c,decls:6,vars:1,consts:[[1,"hero","is-primary"],[1,"hero-body"],[1,"title"],[1,"section"]],template:function(u,h){1&u&&(r.F$t(m),r.TgZ(0,"header",0),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r._uU(3),r.qZA(),r.qZA(),r.qZA(),r.TgZ(4,"main",3),r.Hsn(5),r.qZA()),2&u&&(r.xp6(3),r.Oqu(h.pageTitle))},styles:[""],changeDetection:0}),t})()},9668:(T,d,a)=>{a.d(d,{W:()=>g});var r=a(8583),m=a(7717),c=a(476);let g=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.ez,m.Bz]]}),t})()}}]);