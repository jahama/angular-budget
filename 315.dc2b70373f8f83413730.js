"use strict";(self.webpackChunkangular_budget=self.webpackChunkangular_budget||[]).push([[315],{315:(st,u,a)=>{a.r(u),a.d(u,{HomeModule:()=>ot});var r=a(583),t=a(476);let h=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.ez]]}),e})();var Z=a(668),d=a(116),i=a(922),g=a(207),m=a(340),f=a(841);let T=(()=>{class e{constructor(n){this.http=n}getProjects$(){return this.http.get(m.N.apiHost+"projects").pipe((0,g.U)(n=>n.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(n){this.http=n}getTasksByProjectId$(n){return this.http.get(`${m.N.apiHost}projects/${n}/tasks`).pipe((0,g.U)(s=>s.data))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=a(721);let _=(()=>{class e extends j.y{constructor(){super({loading:!1,projects:[],tasks:[]}),this.projectViews$=this.select$(s=>s.projects),this.tasks$=this.select$(s=>s.tasks),this.loading$=this.select$(s=>s.loading)}setLoadingState(n){const s=this.getState();s.loading=n,this.setState(s)}addProjects(n){const s=this.getState(),c=n.map(p=>Object.assign(Object.assign({},p),{pendingTasks:0,completedTasks:0}));s.projects=s.projects.concat(c),this.setState(s)}addTasks(n){const s=this.getState();s.tasks=s.tasks.concat(n),this.setState(s)}updateProjectTasks(n,s){const c=this.getState(),p=c.projects.find(l=>l.id===n);p&&(p.pendingTasks=s.filter(l=>!1===l.done).length,p.completedTasks=s.filter(l=>!0===l.done).length),this.setState(c)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),y=(()=>{class e{constructor(n,s,c){this.projects=n,this.tasks=s,this.store=c,this.projectViews$=this.store.projectViews$,this.tasks$=this.store.tasks$,this.loading$=this.store.loading$}loadProjectViews(){this.store.setLoadingState(!0),this.projects.getProjects$().pipe((0,i.b)(n=>this.store.addProjects(n)),(0,i.b)(()=>this.store.setLoadingState(!1)),(0,i.b)(n=>n.forEach(s=>this.loadTasksByProjectId(s.id)))).subscribe({error:n=>this.store.setLoadingState(!1)})}loadTasksByProjectId(n){this.tasks.getTasksByProjectId$(n).pipe((0,i.b)(s=>this.store.addTasks(s)),(0,i.b)(s=>this.store.updateProjectTasks(n,s))).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(T),t.LFG(v),t.LFG(_))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=a(409);function A(e,o){if(1&e&&(t.TgZ(0,"a",6),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("href",n.link,t.LSH),t.xp6(1),t.Oqu(n.caption)}}const S=[[["main"]]],k=["main"];let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-card"]],inputs:{card:"card"},ngContentSelectors:k,decls:8,vars:2,consts:[[1,"card","m-4"],[1,"card-header"],[1,"card-header-title","is-size-4"],[1,"card-content"],[1,"card-footer"],["class","card-footer-item",3,"href",4,"ngFor","ngForOf"],[1,"card-footer-item",3,"href"]],template:function(n,s){1&n&&(t.F$t(S),t.TgZ(0,"article",0),t.TgZ(1,"header",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"main",3),t.Hsn(5),t.qZA(),t.TgZ(6,"footer",4),t.YNc(7,A,2,2,"a",5),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(s.card.title),t.xp6(4),t.Q6J("ngForOf",s.card.actions))},directives:[r.sg],styles:[""],changeDetection:0}),e})(),b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-tag"]],inputs:{tag:"tag"},decls:7,vars:6,consts:[[1,"mt-3"],[1,""],[1,"is-pulled-right"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2),t.TgZ(4,"label"),t._uU(5),t.qZA(),t._uU(6),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(s.tag.caption),t.xp6(2),t.Gre("tag is-light is-medium ",s.tag.statusClass||"is-info",""),t.xp6(1),t.Oqu(s.tag.value),t.xp6(1),t.hij(" ",s.tag.units||""," "))},styles:[""],changeDetection:0}),e})(),x=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-no-data-yet"]],decls:7,vars:0,consts:[[1,"section","message","is-warning","is-large"],[1,"message-header"],["aria-label","delete",1,"delete"],[1,"message-body"]],template:function(n,s){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u{1f4ab} No data yet"),t.qZA(),t._UZ(4,"button",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Go ahead and create your first data set. "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})(),q=(()=>{class e{transform(n,...s){return function(e){var o;return(null===(o=[{name:"is-warning",value:"plan"},{name:"is-success",value:"active"},{name:"is-danger",value:"delayed"},{name:"is-dark",value:"canceled"}].find(s=>e===s.value))||void 0===o?void 0:o.name)||"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"status",type:e,pure:!0}),e})(),L=(()=>{class e{transform(n,...s){return function(e){return e>0?"is-danger":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"pending",type:e,pure:!0}),e})(),I=(()=>{class e{transform(n,...s){return function(e){return e>0?"is-success":"is-info"}(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"completed",type:e,pure:!0}),e})();const H=function(e){return{caption:"Ends",value:e}};function D(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"ab-tag",7),t.ALo(2,"date"),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("tag",t.VKq(3,H,t.lcZ(2,1,n.endDate)))}}const O=function(){return{caption:"Edit",link:"#"}},Y=function(){return{caption:"Delete",link:"#"}},w=function(e,o){return[e,o]},B=function(e,o){return{title:e,actions:o}},J=function(e){return{caption:"Starts",value:e}},Q=function(e){return{caption:"Budget",value:e}},N=function(e,o){return{caption:"Status",value:e,statusClass:o}},M=function(e,o){return{caption:"Pending Tasks",value:e,statusClass:o}},z=function(e,o){return{caption:"Completed Tasks",value:e,statusClass:o}};function V(e,o){if(1&e&&(t.TgZ(0,"ab-card",5),t.TgZ(1,"main"),t.TgZ(2,"p",6),t._uU(3),t.qZA(),t.TgZ(4,"section"),t._UZ(5,"ab-tag",7),t.ALo(6,"date"),t.YNc(7,D,3,5,"ng-container",8),t._UZ(8,"ab-tag",7),t.ALo(9,"number"),t._UZ(10,"ab-tag",7),t.ALo(11,"status"),t._UZ(12,"ab-tag",7),t.ALo(13,"pending"),t._UZ(14,"ab-tag",7),t.ALo(15,"completed"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit;t.Q6J("card",t.WLB(23,B,n.name,t.WLB(20,w,t.DdM(18,O),t.DdM(19,Y)))),t.xp6(3),t.Oqu(n.description),t.xp6(2),t.Q6J("tag",t.VKq(26,J,t.lcZ(6,8,n.startDate))),t.xp6(2),t.Q6J("ngIf",n.endDate),t.xp6(1),t.Q6J("tag",t.VKq(28,Q,t.lcZ(9,10,n.budget))),t.xp6(2),t.Q6J("tag",t.WLB(30,N,n.status,t.lcZ(11,12,n.status))),t.xp6(2),t.Q6J("tag",t.WLB(33,M,n.pendingTasks,t.lcZ(13,14,n.pendingTasks))),t.xp6(2),t.Q6J("tag",t.WLB(36,z,n.completedTasks,t.lcZ(15,16,n.completedTasks)))}}function W(e,o){if(1&e&&(t.TgZ(0,"section",3),t.YNc(1,V,16,39,"ab-card",4),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.projects)}}function E(e,o){1&e&&t._UZ(0,"ab-no-data-yet")}let G=(()=>{class e{constructor(){this.projects=[]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-projects"]],inputs:{projects:"projects"},decls:5,vars:2,consts:[[1,"is-size-3"],["class","section columns is-multiline",4,"ngIf","ngIfElse"],["noDataYet",""],[1,"section","columns","is-multiline"],["class","column is-one-quarter-desktop is-half-tablet",3,"card",4,"ngFor","ngForOf"],[1,"column","is-one-quarter-desktop","is-half-tablet",3,"card"],[1,"has-text-centered","is-italic"],[3,"tag"],[4,"ngIf"]],template:function(n,s){if(1&n&&(t.TgZ(0,"h2",0),t._uU(1,"List of projects"),t.qZA(),t.YNc(2,W,2,1,"section",1),t.YNc(3,E,1,0,"ng-template",null,2,t.W1O)),2&n){const c=t.MAs(4);t.xp6(2),t.Q6J("ngIf",s.projects.length>0)("ngIfElse",c)}},directives:[r.O5,r.sg,P,b,x],pipes:[r.uU,r.JJ,q,L,I],styles:[""],changeDetection:0}),e})(),X=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-loading"]],decls:7,vars:0,consts:[[1,"section","message","is-info","is-large"],[1,"message-header"],["aria-label","delete",1,"delete"],[1,"message-body"]],template:function(n,s){1&n&&(t.TgZ(0,"article",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3,"\u23f3 Loading data"),t.qZA(),t._UZ(4,"button",2),t.qZA(),t.TgZ(5,"div",3),t._uU(6," Please wait... "),t.qZA(),t.qZA())},styles:[""],changeDetection:0}),e})();function K(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"ab-projects",5),t.BQk()),2&e){const n=o.ngIf;t.xp6(1),t.Q6J("projects",n)}}function R(e,o){if(1&e&&(t.ynx(0),t.YNc(1,K,2,1,"ng-container",4),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.projects$))}}function tt(e,o){1&e&&t._UZ(0,"ab-loading")}const et=[{path:"",component:(()=>{class e{constructor(n){this.service=n,this.projects$=this.service.projectViews$,this.tasks$=this.service.tasks$,this.loading$=this.service.loading$}ngOnInit(){this.service.loadProjectViews()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ab-home"]],decls:17,vars:4,consts:[["pageTitle","Budget dashboard"],[4,"ngIf","ngIfElse"],["loading",""],[1,"is-italic"],[4,"ngIf"],[3,"projects"]],template:function(n,s){if(1&n&&(t.TgZ(0,"ab-page",0),t.TgZ(1,"main"),t.YNc(2,R,3,3,"ng-container",1),t.ALo(3,"async"),t.YNc(4,tt,1,0,"ng-template",null,2,t.W1O),t.TgZ(6,"pre"),t._uU(7,"      "),t.TgZ(8,"p",3),t._uU(9,"To do..."),t.qZA(),t._uU(10,"\n      "),t.TgZ(11,"li"),t._uU(12,"Tasks summary (total/pending)"),t.qZA(),t._uU(13,"\n      "),t.TgZ(14,"li"),t._uU(15,"Transactions summary (spending/earnings)"),t.qZA(),t._uU(16,"\n    "),t.qZA(),t.qZA(),t.qZA()),2&n){const c=t.MAs(5);t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(3,2,s.loading$))("ngIfElse",c)}},directives:[C.I,r.O5,G,X],pipes:[r.Ov],styles:[""],changeDetection:0}),e})()}];let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(et)],d.Bz]}),e})(),ot=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.ez,nt,Z.W,h]]}),e})()}}]);